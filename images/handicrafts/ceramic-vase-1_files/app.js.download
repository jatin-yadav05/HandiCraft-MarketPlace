"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){window.HIKO=_objectSpread(_objectSpread({},window.HIKO),{},{extension:!0,ajax_calls:0,popup:w});var e=30,t={replace:!0,return_url:!0,enable:!0,key:"retry"},n={};if(function(e){e||(e="info");for(var t={debug:2,info:3,warn:4,error:5},a=0,o=Object.keys(t);a<o.length;a++){var i=o[a];n[i]=t[i]<t[e]?function(){}:console[i].bind(window.console,"".concat(i.toUpperCase(),": "))}n.debug("init log ".concat(e))}(function(){if(!document.currentScript)return{};var e=new URLSearchParams(document.currentScript.src);return{cid:e.get("cid"),level:e.get("level")}}().level),window.HIKO.script)n.debug("script > exit");else{var a="hiko_socials",o="abw",i="g_id_onload",r="g_id_marketing",c="visited",l=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;if(!(location.protocol.indexOf("http")<0||/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/challenge($|\?)/.test(location.pathname))){var s="",d="en",u="";g();var p,f=!1;document.addEventListener("hiko",(function(e){return n.debug("catch event: ".concat(JSON.stringify(e.detail)))})),n.debug("1020");var h=!1,v=M(location.href).ha;if(v&&/^[a-f0-9]{78,}$/.test(v))J(v).then(W);else{var m=M(location.href).hikotoken;if(m)return C("GET","https://api.ipify.org?format=json").then((function(e){return C("POST","/apps/authapp/signin",{token:m,ip:null==e?void 0:e.ip})})).then((function(e){e&&Object.keys(e).length&&(e.token?(X(),B(e)):e.multipass?(X(),O(e)):(X(),G(e)))}));document.addEventListener("onetap",(function(e){if(n.debug("catch onetap event: ".concat(JSON.stringify(e.detail))),"display"===e.detail.action){var t,a,o,c=document.getElementById(i),l=function(){if("iframe"===e.detail.type){var t=c.querySelector("iframe");if("0px"===getComputedStyle(t).getPropertyValue("bottom"))return t}var n=document.querySelector("#credential_picker_iframe");if(n)return n}(),s=p.onetap.email_marketing&&null!==(t=p.onetap.statement)&&void 0!==t&&t.enable?null===(a=p.onetap.statement)||void 0===a?void 0:a.content:null===(o=p.onetap.marketing)||void 0===o?void 0:o.content;l?(l.style.bottom="58px",c.insertAdjacentHTML("beforeend","<style> .otc { position: fixed; bottom: 0px; left: 0px; z-index: ".concat(l.style.zIndex,'; width; 100%; height: 60px; padding: 0 8px 0 8px;} .otc > div {background-color: white; border-top: 1px solid #dadce0;}</style>\n                <div id="').concat(r,'" class="otc">').concat(s,"</div>"))):e.detail.width&&c.insertAdjacentHTML("beforeend","<style> .otc { width: ".concat(e.detail.width,'px; padding: 0 8px 0 8px;} .otc > div {background-color: white; border-radius: 8px; box-shadow: 0 0 0 1px #dadce0;}</style>\n                <div id="').concat(r,'" class="otc">').concat(s,"</div>"));var d=c.querySelector("#".concat(r));d&&d.addEventListener("click",(function(e){return e.stopPropagation()}))}else if("hide"===e.detail.action){var u=document.getElementById(r);u&&(u.style.display="none")}})),new Promise((function(e){return b(e)})).then((function(){return new Promise((function(e,t){var o=L(a);if(null!=o&&o.version){if((p=o).locale&&d===p.locale)return e(o);n.debug("reload for locale change")}C("POST","/apps/authapp/load",{}).then((function(t){p=t,n.debug("init config"),I(a,t),e(t)})).catch((function(e){n.error(null==e?void 0:e.message),t()}))}))})).then((function(e){return p.delay?new Promise((function(t){setTimeout((function(){n.debug("delay ".concat(p.delay)),t(e)}),p.delay)})):Promise.resolve(e)})).then((function(e){var i,r,l,s,d,f;if(p=e,u){if(t.enable){var h=L(t.key);if(null!=h&&h.return_url){I(t.key,_objectSpread(_objectSpread({},h),{},{return_url:!1}));var v=new URLSearchParams(window.location.search).get("return_url");if(v)return void window.location.replace("https://".concat(window.location.hostname).concat(decodeURIComponent(v)))}}return function(){var e,t,n=L(o);n&&(C("POST","/apps/authapp/user",{id:n,cid:u}),I(o));if(!(null!==(e=p.avatar)&&void 0!==e&&e.profile||null!==(t=p.avatar)&&void 0!==t&&t.header))return;var a=L("hiko_"+u);void 0!==(null==a?void 0:a.avatar)?Y(a):C("POST","/apps/authapp/avatar",{id:u,social:p.click||""}).then((function(e){I("hiko_"+u,e),Y(e)})).catch((function(){}))}(),void function(){var e;if(null===(e=p.capture)||void 0===e||!e.enable)return;C("POST","/apps/authapp/customer",{action:"get"}).then((function(e){e.tags&&e.tags.includes("hiko")&&function(e){var t,a,o,i;if((!p.capture.f[0]||p.capture.f[0]&&e.firstName)&&(!p.capture.f[1]||p.capture.f[1]&&e.lastName)&&(!p.capture.f[2]||p.capture.f[2]&&e.phone)&&(!p.capture.f[3]||p.capture.f[3]&&e.addresses[0].countryCodeV2))return;var r=p.capture.f[0]?'<div class="fieldx">\n                <input id="first_name" type="text" value="'.concat(e.firstName||"",'" class="fieldx__input" autocomplete="given-name" autofocus placeholder="').concat(p.i18n.capture.first_name,'"/>\n                <label id="first_name_label" class="fieldx__label">').concat(p.i18n.capture.first_name,"</label>\n                </div>"):"",c=p.capture.f[1]?'<div class="fieldx">\n                <input id="last_name" type="text" value="'.concat(e.lastName||"",'" class="fieldx__input" autocomplete="family-name" placeholder="').concat(p.i18n.capture.last_name,'" />\n                <label id="last_name_label" class="fieldx__label">').concat(p.i18n.capture.last_name,"</label>\n                </div>"):"",l=p.capture.f[2]?'<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@24.5.0/build/css/intlTelInput.css">\n                <div class="fieldx">\n                <input id="phone" value="'.concat(e.phone||"",'" class="fieldx__input" placeholder="').concat(p.i18n.capture.phone,'">\n                <label id="phone_label" class="fieldx_dropdown">').concat(p.i18n.capture.phone,"</label>\n                </div>"):"",s=p.capture.f[3]?'<div class="fieldx">\n                <select id="country" class="fieldx__input">\n                    '.concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[["","-"],["AC","Ascension Island"],["AD","Andorra"],["AE","United Arab Emirates"],["AF","Afghanistan"],["AG","Antigua & Barbuda"],["AI","Anguilla"],["AL","Albania"],["AM","Armenia"],["AN","Netherlands Antilles"],["AO","Angola"],["AR","Argentina"],["AT","Austria"],["AU","Australia"],["AW","Aruba"],["AX","Åland Islands"],["AZ","Azerbaijan"],["BA","Bosnia & Herzegovina"],["BB","Barbados"],["BD","Bangladesh"],["BE","Belgium"],["BF","Burkina Faso"],["BG","Bulgaria"],["BH","Bahrain"],["BI","Burundi"],["BJ","Benin"],["BL","St. Barthélemy"],["BM","Bermuda"],["BN","Brunei"],["BO","Bolivia"],["BQ","Caribbean Netherlands"],["BR","Brazil"],["BS","Bahamas"],["BT","Bhutan"],["BV","Bouvet Island"],["BW","Botswana"],["BY","Belarus"],["BZ","Belize"],["CA","Canada"],["CC","Cocos (Keeling) Islands"],["CD","Congo - Kinshasa"],["CF","Central African Republic"],["CG","Congo - Brazzaville"],["CH","Switzerland"],["CI","Côte d’Ivoire"],["CK","Cook Islands"],["CL","Chile"],["CM","Cameroon"],["CN","China"],["CO","Colombia"],["CR","Costa Rica"],["CU","Cuba"],["CV","Cape Verde"],["CW","Curaçao"],["CX","Christmas Island"],["CY","Cyprus"],["CZ","Czechia"],["DE","Germany"],["DJ","Djibouti"],["DK","Denmark"],["DM","Dominica"],["DO","Dominican Republic"],["DZ","Algeria"],["EC","Ecuador"],["EE","Estonia"],["EG","Egypt"],["EH","Western Sahara"],["ER","Eritrea"],["ES","Spain"],["ET","Ethiopia"],["FI","Finland"],["FJ","Fiji"],["FK","Falkland Islands"],["FO","Faroe Islands"],["FR","France"],["GA","Gabon"],["GB","United Kingdom"],["GD","Grenada"],["GE","Georgia"],["GF","French Guiana"],["GG","Guernsey"],["GH","Ghana"],["GI","Gibraltar"],["GL","Greenland"],["GM","Gambia"],["GN","Guinea"],["GP","Guadeloupe"],["GQ","Equatorial Guinea"],["GR","Greece"],["GS","South Georgia & South Sandwich Islands"],["GT","Guatemala"],["GW","Guinea-Bissau"],["GY","Guyana"],["HK","Hong Kong SAR"],["HM","Heard & McDonald Islands"],["HN","Honduras"],["HR","Croatia"],["HT","Haiti"],["HU","Hungary"],["ID","Indonesia"],["IE","Ireland"],["IL","Israel"],["IM","Isle of Man"],["IN","India"],["IO","British Indian Ocean Territory"],["IQ","Iraq"],["IR","Iran"],["IS","Iceland"],["IT","Italy"],["JE","Jersey"],["JM","Jamaica"],["JO","Jordan"],["JP","Japan"],["KE","Kenya"],["KG","Kyrgyzstan"],["KH","Cambodia"],["KI","Kiribati"],["KM","Comoros"],["KN","St. Kitts & Nevis"],["KP","North Korea"],["KR","South Korea"],["KW","Kuwait"],["KY","Cayman Islands"],["KZ","Kazakhstan"],["LA","Laos"],["LB","Lebanon"],["LC","St. Lucia"],["LI","Liechtenstein"],["LK","Sri Lanka"],["LR","Liberia"],["LS","Lesotho"],["LT","Lithuania"],["LU","Luxembourg"],["LV","Latvia"],["LY","Libya"],["MA","Morocco"],["MC","Monaco"],["MD","Moldova"],["ME","Montenegro"],["MF","St. Martin"],["MG","Madagascar"],["MK","North Macedonia"],["ML","Mali"],["MM","Myanmar (Burma)"],["MN","Mongolia"],["MO","Macao SAR"],["MQ","Martinique"],["MR","Mauritania"],["MS","Montserrat"],["MT","Malta"],["MU","Mauritius"],["MV","Maldives"],["MW","Malawi"],["MX","Mexico"],["MY","Malaysia"],["MZ","Mozambique"],["NA","Namibia"],["NC","New Caledonia"],["NE","Niger"],["NF","Norfolk Island"],["NG","Nigeria"],["NI","Nicaragua"],["NL","Netherlands"],["NO","Norway"],["NP","Nepal"],["NR","Nauru"],["NU","Niue"],["NZ","New Zealand"],["OM","Oman"],["PA","Panama"],["PE","Peru"],["PF","French Polynesia"],["PG","Papua New Guinea"],["PH","Philippines"],["PK","Pakistan"],["PL","Poland"],["PM","St. Pierre & Miquelon"],["PN","Pitcairn Islands"],["PS","Palestinian Territories"],["PT","Portugal"],["PY","Paraguay"],["QA","Qatar"],["RE","Réunion"],["RO","Romania"],["RS","Serbia"],["RU","Russia"],["RW","Rwanda"],["SA","Saudi Arabia"],["SB","Solomon Islands"],["SC","Seychelles"],["SD","Sudan"],["SE","Sweden"],["SG","Singapore"],["SH","St. Helena"],["SI","Slovenia"],["SJ","Svalbard & Jan Mayen"],["SK","Slovakia"],["SL","Sierra Leone"],["SM","San Marino"],["SN","Senegal"],["SO","Somalia"],["SR","Suriname"],["SS","South Sudan"],["ST","São Tomé & Príncipe"],["SV","El Salvador"],["SX","Sint Maarten"],["SY","Syria"],["SZ","Eswatini"],["TA","Tristan da Cunha"],["TC","Turks & Caicos Islands"],["TD","Chad"],["TF","French Southern Territories"],["TG","Togo"],["TH","Thailand"],["TJ","Tajikistan"],["TK","Tokelau"],["TL","Timor-Leste"],["TM","Turkmenistan"],["TN","Tunisia"],["TO","Tonga"],["TR","Türkiye"],["TT","Trinidad & Tobago"],["TV","Tuvalu"],["TW","Taiwan"],["TZ","Tanzania"],["UA","Ukraine"],["UG","Uganda"],["UM","U.S. Outlying Islands"],["US","United States"],["UY","Uruguay"],["UZ","Uzbekistan"],["VA","Vatican City"],["VC","St. Vincent & Grenadines"],["VE","Venezuela"],["VG","British Virgin Islands"],["VN","Vietnam"],["VU","Vanuatu"],["WF","Wallis & Futuna"],["WS","Samoa"],["XK","Kosovo"],["YE","Yemen"],["YT","Mayotte"],["ZA","South Africa"],["ZM","Zambia"],["ZW","Zimbabwe"],["ZZ","Unknown Region."]].map((function(t){return'<option value="'.concat(t[0],'"').concat(t[0]===e.toUpperCase()?" selected":"",">").concat(t[1],"</option>")})).join("")}(null===(t=e.addresses[0])||void 0===t?void 0:t.countryCodeV2),'\n                </select>\n                <label id="country_label" class="fieldx__label">').concat(p.i18n.capture.country,"</label>\n                </div>"):"",d=null!==(a=p.passwordless)&&void 0!==a&&a.enable&&p.passwordless.logo?p.passwordless.logo:"";document.body.insertAdjacentHTML("beforeend",'<dialog id="hikocustomfields" class="hikodialog">\n                '.concat(d?'<div class="dia-img"><img src="'.concat(d,'"/></div>'):"",'\n                <div class="dia-title">').concat(p.i18n.capture.title,'</div>\n                <div class="dia-subtitle">').concat(p.i18n.capture.subtitle,'</div>\n                <div class="hiko-passwordless">\n                    ').concat(r,"\n                    ").concat(c,"\n                    ").concat(l,"\n                    ").concat(s,'\n                    <div class="buttonx">').concat(p.i18n.capture.submit,"</div>                    \n                </div>\n            </dialog>"));var u,f=window.hikocustomfields;null===(o=f.querySelector("#first_name"))||void 0===o||o.addEventListener("keyup",(function(e){"Enter"===e.key&&v()})),null===(i=f.querySelector("#last_name"))||void 0===i||i.addEventListener("keyup",(function(e){"Enter"===e.key&&v()})),l&&Q("https://cdn.jsdelivr.net/npm/intl-tel-input@24.5.0/build/js/intlTelInput.min.js").then((function(){var t;u=window.intlTelInput(f.querySelector("#phone"),{autoHideDialCode:!0,dropdownContainer:f,formatOnDisplay:!0,initialCountry:(null===(t=e.addresses[0])||void 0===t?void 0:t.countryCodeV2)||"auto",nationalMode:!0,separateDialCode:!1,strictMode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.5.0/build/js/utils.js"})}));var h=f.querySelector(".buttonx");function v(){Promise.all([new Promise((function(t,n){if(!p.capture.f[0])return t();var a=f.querySelector("#first_name"),o=f.querySelector("#first_name_label");o.restore=function(){return o.style=""},o.invalidate=function(){return o.style="color: red; weight: 600;"},a.value?e.firstName!==a.value?(o.restore(),t({first_name:a.value})):(o.restore(),t()):(o.invalidate(),n())})),new Promise((function(t,n){if(!p.capture.f[1])return t();var a=f.querySelector("#last_name"),o=f.querySelector("#last_name_label");o.restore=function(){return o.style=""},o.invalidate=function(){return o.style="color: red; weight: 600;"},a.value?e.lastName!==a.value?(o.restore(),t({last_name:a.value})):(o.restore(),t()):(o.invalidate(),n())})),new Promise((function(t,n){if(!p.capture.f[2])return t();var a=u.getNumber(),o=f.querySelector("#phone_label");if(o.restore=function(){o.style="",o.innerHTML=p.i18n.capture.phone},o.invalidate=function(e){o.style="color: red; weight: 600;",o.innerHTML=e||p.i18n.capture.phone},a){if(e.phone!==a)return h.startSpin(),C("POST","/apps/authapp/customer",{phone:a,action:"update"}).then((function(e){null!=e&&e.error?(o.invalidate(e.error),n()):(o.restore(),t())})).catch((function(){o.invalidate(),n()})).finally((function(){h.stopSpin()}));o.restore(),t()}else o.invalidate(),n()})),new Promise((function(t,n){var a;if(!p.capture.f[3])return t();var o=f.querySelector("#country"),i=f.querySelector("#country_label");i.restore=function(){return i.style=""},i.invalidate=function(){return i.style="color: red; weight: 600;"};var r=o.options[o.selectedIndex].value;r?(null===(a=e.addresses[0])||void 0===a?void 0:a.countryCodeV2)!==r?(i.restore(),t({country:r})):(i.restore(),t()):(i.invalidate(),n())}))]).then((function(e){var t=e.reduce((function(e,t){return _objectSpread(_objectSpread({},e),t)}),{});if(Object.keys(t).length)return n.debug(t),h.startSpin(),C("POST","/apps/authapp/customer",_objectSpread(_objectSpread({},t),{},{action:"update"})).finally((function(){h.stopSpin()}))})).then((function(){window.hikocustomfields.close(),function(e){window.hikotoast||document.body.insertAdjacentHTML("beforeend",'<div id="hikotoast">'.concat(e,"</div>"));var t=window.hikotoast;t.className="show",setTimeout((function(){t.className=t.className.replace("show","")}),3e3)}(p.i18n.capture.toast)})).catch((function(e){n.error(null==e?void 0:e.message)}))}h.startSpin=function(){return T(h)},h.stopSpin=function(){return x(h,v)},h.onclick=v,window.hikocustomfields.addEventListener("keydown",(function(e){"Escape"===e.key&&e.preventDefault()})),window.hikocustomfields.showModal()}(e)}))}()}if(t.enable){var m=L(t.key);if(null!=m&&m.replace)return I(t.key,_objectSpread(_objectSpread({},m),{},{replace:!1})),void window.location.replace(window.location.href)}document.querySelector('div[name="hiko-container"]')||document.querySelector('form[action*="/account"]')?K():I(c,location.pathname),null!==(i=p.onetap)&&void 0!==i&&i.enable&&new Promise((function(e){var t=document.createElement("iframe");t.id="3pc",t.src="https://apps.hiko.software/js/assets/cookie.html",t.style.display="none",t.style.position="fixed",document.body.appendChild(t),window.addEventListener("message",(function a(o){if("3pcSupported"===o.data||"3pcUnsupported"===o.data){var i=!1;"3pcUnsupported"===o.data&&(i=!0,n.info("no 3'rd party cookie")),document.body.removeChild(t),window.removeEventListener("message",a),e(i)}}),!1)})).then(q),function(){try{var e=new MutationObserver((function(e){e.forEach((function(e){"attributes"===e.type&&"lang"===e.attributeName&&(I(a),K()),"childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE&&(e.querySelector('form[action*="/account"]')&&K(),"FORM"===e.nodeName)){var t,a=_createForOfIteratorHelper(e.attributes);try{for(a.s();!(t=a.n()).done;){var o=t.value;"action"===o.name&&(n.debug("add form ".concat(o.value)),o.value.indexOf("/account")>=0&&K())}}catch(e){a.e(e)}finally{a.f()}}}))}))}));e.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),e.observe(document.body,{childList:!0,subtree:!0})}catch(e){n.error(e.message)}}(),C("POST","/apps/authapp/load",{version:(l=L(a)).version,locale:l.locale}).then((function(e){var t;if(e.version&&l.version!==e.version||e.error){n.debug("config version ".concat(l.version," > ").concat(e.version)),I(a,e);var o=document.querySelectorAll('div[name="hiko-container"]');o.length&&(o.forEach((function(e){return e.remove})),p=e,K())}e.webview&&null!==(t=p.webview_hides)&&void 0!==t&&t.length&&document.querySelectorAll('div[name="hiko-container"]').forEach((function(e){p.webview_hides.forEach((function(t){var n=e.querySelector("div[data=".concat(t));n&&n.remove()}))}))})),null!==(s=p.ip)&&void 0!==s&&s.address||null!==(d=p.ip)&&void 0!==d&&d.disable||C("GET","https://api.ipify.org?format=json").then((function(e){null!=e&&e.ip&&(n.debug("ip ".concat(e.ip)),p.ip={address:e.ip},j(a,{ip:_objectSpread({},p.ip)}))})).catch((function(e){return n.debug("popup ip fail ".concat(null==e?void 0:e.message))})),null!==(r=p.passwordless)&&void 0!==r&&r.enable&&(!function(){var e=document.querySelectorAll(".hiko-passwordless");e&&e.forEach((function(e){return S(e)}));if(p.passwordless.replaceLoginIcon){document.querySelectorAll("a[href*='/account/login']").forEach((function(e){e.querySelector("svg")&&(e.href="#",e.onclick=w)}))}}(),(f=document.querySelectorAll(".hiko-dialog"))&&f.forEach((function(e){return e.onclick=w})))}));var y=3e4}}}function g(){var e,t,n;s=null===(e=window.Shopify)||void 0===e?void 0:e.shop,d=(null===(t=window.Shopify)||void 0===t?void 0:t.locale)||"en",u=null===(n=window.__st)||void 0===n?void 0:n.cid}function b(e){var t;if(null!==(t=window.Shopify)&&void 0!==t&&t.shop&&window.__st)return g(),e();setTimeout((function(){return b(e)}),300)}function w(){var e,t;window.hikodialog||(U(),document.body.insertAdjacentHTML("beforeend",'<dialog id="hikodialog" class="hikodialog">\n                    '.concat(null!==(e=p.passwordless)&&void 0!==e&&e.logo?'<div class="dia-img"><img src="'.concat(null===(t=p.passwordless)||void 0===t?void 0:t.logo,'"/></div>'):"",'\n                    <div class="dia-title">').concat(p.i18n.link.title||"",'</div>\n                    <div class="dia-subtitle">').concat(p.i18n.link.subtitle||"",'</div>\n                    <svg class="x" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="3.4" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                        <path stroke="none" d="M0 0h24v24H0z"/>\n                        <line x1="18" y1="6" x2="6" y2="18" />\n                        <line x1="6" y1="6" x2="18" y2="18" />\n                    </svg>\n                    <div id="hikodialogbuttons" style="padding: ').concat(p.passwordless.top||0,"px ").concat(p.passwordless.right||0,"px ").concat(p.passwordless.bottom||0,"px ").concat(p.passwordless.left||0,'px" class="hiko-passwordless"></div>\n                </dialog>')),window.hikodialog.querySelector(".x").onclick=function(){return window.hikodialog.close()},S(window.hikodialogbuttons));window.hikodialog.showModal()}function S(e){e.childNodes.length||(U(),e.insertAdjacentHTML("beforeend",'<div class="start">&nbsp;</div>'),_(e),F(e))}function k(e,t){var n={email:t};return n.mkt=R(e),C("POST","/apps/authapp/link",n)}function _(e){var t=p.html[e.getAttribute("type")||"login"];document.body.insertAdjacentHTML("beforeend",'<div id="hikopsudo">'.concat(t,"</div>"));var n=window.hikopsudo.querySelector(".h_divider"),a=window.hikopsudo.querySelector(".h_buttons"),o=window.hikopsudo.querySelector(".h_marketing"),i=window.hikopsudo.querySelector(".h_consent"),r=window.hikopsudo.querySelector('div[name="hiko-err"]');window.hikopsudo.remove(),e.appendChild(r),e.appendChild(a),a.children.length&&(a.children[0].setAttribute("tabindex","0"),a.children[0].setAttribute("style","outline: none")),n&&e.appendChild(n),o&&e.appendChild(o),i&&e.appendChild(i),function(e){var t=e.querySelector(".h_divider")||e.querySelector(".h_buttons");t.insertAdjacentHTML("afterend",'<div id="inputblock" class="hiko-passwordless">\n                <label>'.concat(p.i18n.link.label,'</label>\n                <div class="fieldx">\n                    <input type="email" class="fieldx__input" value="" aria-required="true" autocorrect="off" autocapitalize="off" autocomplete="email" placeholder="Email">\n                    <label class="fieldx__label">\n                    ').concat(p.i18n.link.placeholder,'\n                    </label>\n                </div>\n                <div class="buttonx">').concat(p.i18n.link.submit,"</div>\n            </div>"));var n=e.querySelector(".buttonx");n.onclick=i,n.startSpin=function(){return T(n)},n.stopSpin=function(){return x(n,i)};var a=e.querySelector("input");a.addEventListener("keypress",(function(t){if(o.restore(),"Enter"===t.key){if(!l.test(a.value))return void o.invalidate();n.startSpin(),k(e,a.value).then((function(){e.querySelector("#inputblock").remove(),A(e,a)})).then((function(){return n.stopSpin()}))}}));var o=e.querySelector(".fieldx__label");function i(){if(!l.test(a.value))return o.invalidate();n.startSpin(),k(e,a.value).then((function(){return A(e,a)})).finally((function(){return n.stopSpin()}))}o.restore=function(){return o.style=""},o.invalidate=function(){return o.style="color: red; weight: 600;"}}(e)}function A(e,t){var n=[];n.push(e.querySelector("#inputblock")),n.push(e.querySelector(".h_divider")),n.push(e.querySelector(".h_buttons")),n.push(e.querySelector(".h_marketing")),n.push(e.querySelector(".h_consent")),n.push(e.querySelector('div[name="hiko-err"]'));for(var a=0,o=n;a<o.length;a++){var i=o[a];i&&i.remove()}e.querySelector(".start").insertAdjacentHTML("afterend",'<div id="message" style="padding-bottom: 40px">\n                    <div style="text-align: left"> <span style="color: grey"><&nbsp;</span><span class="message-back">'.concat(p.i18n.link.resend.back,'</span> </div>\n                    <div class="message-title">').concat(p.i18n.link.resend.title,'</div>\n                    <div class="message-body">').concat(p.i18n.link.resend.body," ").concat(p.passwordless.name,'.</div>\n                    <div style="text-align: center;">\n                    <img style="padding: 20px 0 20px; " src="https://apps.hiko.software/js/assets/received.png" width="50px"/>\n                    </div>\n                    <div id="resend_block" style="display: none">\n                        <span class="message-body">').concat(p.i18n.link.resend.desc,'</span> &nbsp;\n                        <div id="resend" class="buttonx">').concat(p.i18n.link.resend.button,"</div>\n                    </div>\n                </div>"));var r=e.querySelector("#message"),c=r.querySelector("#resend");function l(){e.querySelector("#resend_block").style="display: block; text-align: left;",c.onclick=function(){c.startSpin(),k(e,t.value).then((function(){c.stopSpin(),c.innerHTML=p.i18n.link.resend.sent,c.onclick=null,c.style.cursor="default",setTimeout(l,y)}))},c.style.cursor="pointer",c.innerHTML=p.i18n.link.resend.button}c.startSpin=function(){return T(c)},c.stopSpin=function(){return x(c,l)},setTimeout(l,y),r.querySelector(".message-back").onclick=function(){r.remove(),_(e)}}function T(e){e.classList.add("button--loading"),e.originInnerHTML=e.innerHTML,e.innerHTML="",e.style="cursor: default",e.onclick=null}function x(e,t){e.classList.remove("button--loading"),e.innerHTML=e.originInnerHTML,e.style="cursor: pointer",e.onclick=t}function E(e){var t,n;if(!p.onetap.email_marketing&&null!==(t=p.onetap.marketing)&&void 0!==t&&t.enable?"block":p.onetap.email_marketing&&null!==(n=p.onetap.statement)&&void 0!==n&&n.enable?"statement":null)if(e)h||(h=!0,document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"iframe",width:e}})));else{var a=document.getElementById(i).querySelector("iframe");"0px"===getComputedStyle(a).getPropertyValue("bottom")&&document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"iframe"}}))}}function M(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,n,a){return t[n]=a})),t}function C(t,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n.debug("ajax send ".concat(a)),++window.HIKO.ajax_calls>e)throw new Error("possible infinite met");return new Promise((function(e,n){var r=new XMLHttpRequest;r.responseType=i.responseType||"json";var c=function(e){var t=[];for(var n in e)t.push("".concat(n,"=").concat(encodeURIComponent(""+e[n]||"")));return t.join("&")}(_objectSpread(_objectSpread({},o),{},{href:encodeURIComponent(location.href),locale:d}));"POST"===t?(r.open("POST","".concat(location.origin).concat(a),!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):a.indexOf("http")<0?r.open("GET","https://apps.hiko.link".concat(a,"?").concat(c)):r.open("GET",a),r.onload=function(){return 204===r.status?e({}):200===r.status?"text"===r.responseType?e(r.responseText):"json"===r.responseType?e(r.response):n():void n()},r.send(c)}))}function L(e){var t=sessionStorage.getItem(e);if(t)return JSON.parse(t)}function I(e,t){if(!e&&"string"!=typeof e)return n.error("invalid storage set");if(t)if(t.error){var a=JSON.parse(JSON.stringify(t));delete a.error,sessionStorage.setItem(e,JSON.stringify(a))}else sessionStorage.setItem(e,JSON.stringify(t));else sessionStorage.removeItem(e)}function j(e,t){I(e,_objectSpread(_objectSpread({},L(e)||{}),t))}function q(e){var t,a;if(null!==(t=p.onetap)&&void 0!==t&&t.enable&&!/.*\/account/.test(location.pathname)){if(p.onetap.excludes){var o,i=_createForOfIteratorHelper(p.onetap.excludes);try{for(i.s();!(o=i.n()).done;){var r=o.value;if(new RegExp(r,"i").test(location.pathname))return void n.debug("".concat(r," excludes ").concat(location.pathname))}}catch(e){i.e(e)}finally{i.f()}}if(!(/(iPod|iPhone|iPad)/.test(navigator.userAgent)||/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))||p.onetap.safari)if(function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}("onet"))n.warn("one tap supressed");else{var c=(null===(a=p.onetap.position)||void 0===a?void 0:a.maxWidth)||480;if(!1===p.onetap.mobile&&c>=window.innerWidth)n.debug("mobile disabled for width ".concat(window.innerWidth));else{!0===p.events&&(f=!0);var l=e||p.onetap.custom?P:H;p.onetap.delay?isNaN(p.onetap.delay)||setTimeout((function(){n.debug("delay due "+p.onetap.delay),l(N,e)}),1e3*p.onetap.delay):l(N,e)}}else n.warn("one tap not supported")}}function N(e){var t,o=_objectSpread(_objectSpread({},e),{},{href:encodeURIComponent(location.href),locale:d,cip:(null===(t=p.ip)||void 0===t?void 0:t.address)||""}),i=document.getElementById(r);if(i){var c=i.querySelector('input[type="checkbox"]');c&&(o.checked=""+c.checked,n.debug("one tap marketing conent ".concat(c.checked)))}f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"onetap",social:"google"}})),document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"hide"}})),j(a,{click:"google"}),C("POST","/apps/authapp/onetap",o).then((function(e){e&&(e.token?(X(),B(e)):e.multipass?(X(),O(e)):(X(),G(e)))}))}function O(e){f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"multipass",email:e.email,customer_id:e.customer_id,new_customer:e.new_customer}})),window.location.replace(e.multipass),t.enable&&I(t.key,t)}function P(e,t){var a="onetap".concat((new Date).getTime());window[a]=e,t?(n.debug("pop block in fedcm"),document.body.insertAdjacentHTML("beforeend",'<div id="'.concat(i,'"\n                        data-client_id="').concat(p.onetap.id,'"\n                        data-callback="').concat(a,'"\n                        data-itp_support="true"\n                        data-use_fedcm_for_prompt="true">\n                </div>'))):document.body.insertAdjacentHTML("beforeend",'<div id="'.concat(i,'"\n                    data-client_id="').concat(p.onetap.id,'"\n                    data-callback="').concat(a,'"\n                    data-itp_support="true"\n                    data-cancel_on_tap_outside="').concat(!1!==p.onetap.cancel_on_tap_outside,'">\n                </div>')),Q("https://accounts.google.com/gsi/client")}function H(e){var t,a,o,r;n.debug("poping one tap");var c="_".concat(Math.round(1e7*Math.random()).toString(36)),l=(null===(t=p.onetap.position)||void 0===t?void 0:t.right)||20,s=(null===(a=p.onetap.position)||void 0===a?void 0:a.top)||20,d=(null===(o=p.onetap.position)||void 0===o?void 0:o.zIndex)||999;n.debug("popping one tap frame ".concat(c,", ").concat(l,", ").concat(s,", ").concat(d));var u=document.createElement("style");u.innerHTML="\n              .".concat(c,"cz {position: fixed !important;  right: ").concat(l,"px; top: ").concat(s,"px;  z-index: ").concat(d,";}\n              .").concat(c,"z { border: none; }\n              @media screen and (max-width: ").concat((null===(r=p.onetap.position)||void 0===r?void 0:r.maxWidth)||480,"px) { .").concat(c,"z { position: fixed; bottom: 0px; left: 0px; z-index: 2147483647; width: 100%; height: 239px;  border: none; } }\n            ");var f=$('<div id="'.concat(i,'" style="display: none;" class="').concat(c,'cz"/>')),h=$('<iframe class="'.concat(c,'z" src="https://apps.hiko.software/js/assets/tap.html?v=').concat((new Date).getTime(),"&client=").concat(p.onetap.id,'" allow="identity-credentials-get"></iframe>'));f.append(h),document.body.append(u),document.body.append(f),E(),window.addEventListener("message",(function(t){if("size"===t.data.type)h.style.height=t.data.height+"px",n.debug("one tap popup with (".concat(t.data.width,", ").concat(t.data.height,")")),E(t.data.width);else if("notification"===t.data.type){var a=t.data,o=a.display,i=a.reason;n.debug("one tap ".concat(JSON.stringify(t.data))),o?(f.style.display="block",C("POST","/apps/authapp/event",{name:"onetappop",path:location.pathname}).catch((function(e){return n.error(e.message)})),document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"popup",social:"google"}}))):(f.style.display="none","user_cancel"===i&&(!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="; expires="+a.toGMTString();document.cookie=e+"="+t+o+"; path=/"}("onet",i),n.debug("user_cancel one tap")),document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"hide"}})))}else"credential"===t.data.type&&e(t.data.token)}))}function G(e){f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"login",email:e.email,customer_id:e.id}})),z(e.contextpath,{form_type:"customer_login","customer[email]":{value:e.email,style:"border: none; height: 1px; width: 1px;"},"customer[password]":e.password},{display:"block"})}function B(e){f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"activate",customer_id:e.id}})),z(e.contextpath,{"customer[password]":e.password,"customer[password_confirmation]":e.password,token:e.token,utf8:"✓",id:e.id})}function z(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{display:"none"},o=$('<form method="post" action="'.concat(e,'" style="display: ').concat(a.display,';"/>'));"none"!==a.display&&o.insertAdjacentHTML("beforeend",'<div name="hiko-container" ignore></div>'),document.body.prepend(o);var i=null;for(var r in t){var c=document.createElement("input");c.setAttribute("name",r),o.appendChild(c),"object"===_typeof(t[r])?(c.setAttribute("value",t[r].value),t[r].style&&(c.setAttribute("style",t[r].style),i=c)):(c.setAttribute("value",t[r]),c.setAttribute("hidden",!0))}"customer_login"===t.form_type&&window.Shopify.captcha?(o.setAttribute("data-shopify-captcha",!0),i&&i.focus(),setTimeout((function(){return window.Shopify.captcha.protect(o,(function(){n.debug("shopify captcha submit"),o.submit()}))}),3e3)):o.submit()}function K(){var e=function(){var e=document.querySelectorAll('div[name="hiko-container"]');if(e.length){var t,a=[],o=!1,i=_createForOfIteratorHelper(e);try{var r=function(){var e=t.value;""===e.getAttribute("ignore")?(o=!0,n.debug("ignore container"),e.querySelectorAll("div[data]").forEach((function(t){return t.onclick=function(){return Z({button:t,container:e})}})),document.head.insertAdjacentHTML("beforeend",'<style id="hikoimages">'.concat(p.images,"</style>"))):a.push(e)};for(i.s();!(t=i.n()).done;)r()}catch(e){i.e(e)}finally{i.f()}return o?[]:a}if(/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/cart($|\?)/.test(location.pathname))return[];var c=document.querySelectorAll('form[action*="/account"]'),l=[];return c.forEach((function(e){var t;if(!(e.querySelector('div[name="hiko-container"]')||(null===(t=e.action)||void 0===t?void 0:t.indexOf("/account/recover"))>=0))if(null!==e.querySelector("input[type=email]")||"portal-bosque.myshopify.com"!==s)if(e.querySelector('input[name="checkout_url"]')&&e.querySelector('input[name="guest"]'))n.debug("gest form, skip container");else if(e.querySelectorAll("input").length<=2)n.debug("fake customer login for invoke recaptcha");else{var a=e.action.indexOf("/account/login")>=0?$('<div name="hiko-container" type="login" app/>'):$('<div name="hiko-container" type="register" app/>');"top"===p.position?e.prepend(a):e.append(a),l.push(a)}else n.debug("no input email, skip container")})),l}();!0===p.events&&(f=!0),(null==e?void 0:e.length)>0&&(U(),e.forEach(D)),function(){var e,t=p.ip,n=_createForOfIteratorHelper(document.querySelectorAll('form[action*="/account"]'));try{var a=function(){var n=e.value;n.addEventListener("submit",(function(){var e,a,i=null===(e=n.querySelector('input[name="customer[password]"]'))||void 0===e?void 0:e.value,r=null===(a=n.querySelector('input[name="customer[email]"]'))||void 0===a?void 0:a.value,c=encodeURIComponent(Math.random().toString(36).substring(5)),l={id:c,email:r};null!=t&&t.address&&(l.cip=t.address),l.mkt=R(document),r&&i&&c&&(I(o,c),C("POST","/apps/authapp/user",l))}))};for(n.s();!(e=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}}()}function R(e){var t=p,n=t.marketing,a=t.marketing_option;return"always"===a||"always_register"===a?"true":n?e.querySelector('input[name="'.concat(n,'"][type="checkbox"]')).checked:void 0}function U(){document.querySelectorAll("#hikostyles").forEach((function(e){return e.remove()})),document.querySelectorAll("#hikoimages").forEach((function(e){return e.remove()})),document.head.insertAdjacentHTML("beforeend",'<style id="hikostyles">'.concat(p.css,"</style>")),document.head.insertAdjacentHTML("beforeend",'<style id="hikoimages">'.concat(p.images,"</style>"))}function D(e){var t;if(null!==(t=p.passwordless)&&void 0!==t&&t.enable&&p.passwordless.replacePasswordLogin)return e.parentNode.style.display="none",e.parentNode.after(e),e.className=e.className?"".concat(e.className," hiko-passwordless"):"hiko-passwordless",S(e),void F(e);var n=p.html[e.getAttribute("type")||"login"];e.innerHTML="",e.insertAdjacentHTML("afterbegin",n),F(e)}function F(e){var t=e.querySelector(".".concat(p.classes.consent));e.querySelectorAll(".".concat(p.classes.buttons," > div")).forEach((function(n){return n.onclick=function(){return Z({button:n,consent:t,classes:p.classes,marketing:p.marketing,marketing_option:p.marketing_option,container:e})}}))}function Z(e){var t,o,i,r=e.button,l=e.consent,u=e.classes,h=e.marketing,v=e.marketing_option,m=e.container,y=r.getAttribute("data");if(n.debug("".concat(y," clicked")),f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{social:y,action:"click"}})),l){var g=l.querySelector("input");if(g){if(!1===g.checked)return l.setAttribute("class",u.consent+" "+u.disagree);l.setAttribute("class",u.consent)}}var b={google:window.innerWidth<768?{width:450,height:680}:window.innerWidth>970?{width:970,height:700}:{width:768,height:700},facebook:{width:520,height:700},spotify:{width:520,height:470},twitter:{width:700,height:800},linkedin:{width:480,height:580},amazon:{width:420,height:580},line:window.innerWidth<768?{width:400,height:730}:{width:768,height:730},snapchat:{width:400,height:730},kakao:window.innerWidth<768?{width:400,height:680}:{width:768,height:680},tumblr:{width:430,height:760},twitch:{width:400,height:370},discord:{width:500,height:730},reddit:{width:860,height:620},vk:{width:680,height:450},tiktok:{width:400,height:620}},w=(null===(t=b[y])||void 0===t?void 0:t.width)||400,S=(null===(o=b[y])||void 0===o?void 0:o.height)||580;j(a,{click:y});var k=function(){if("always"===v||"always_register"===v)return"true";if(h){var e=document.querySelector('input[name="'.concat(h,'"][type="checkbox"]'));if(e)return e.checked}return""}(),_=encodeURIComponent(location.href),A=(new Date).getTime(),T=(null==m?void 0:m.getAttribute("register_tag"))||"",x=(null===(i=p.ip)||void 0===i?void 0:i.address)||"",E=encodeURIComponent(L(c)||"");I(c,"");try{window.addEventListener("message",V,!1),window.open("https://apps.hiko.link/js/login.html?social=".concat(y,"&shop=").concat(s,"&href=").concat(_,"&locale=").concat(d,"&mkt=").concat(k,"&register_tag=").concat(T,"&cip=").concat(x,"&visited=").concat(E,"&ts=").concat(A),"Login social","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(w,", height=").concat(S)).focus()}catch(e){n.debug("redirecting ..."),z("https://apps.hiko.link/admin/auth",{social:y,shop:s,href:_,locale:d})}}function V(e){n.debug("received from popup ".concat(e.origin)),e.data.en&&J(e.data.en).then(W)}function J(e){var t=new TextEncoder("hex"),n=new TextDecoder("utf8");return crypto.subtle.importKey("raw",t.encode(s.substring(0,16)),"AES-GCM",!0,["decrypt"]).then((function(n){return crypto.subtle.decrypt({name:"AES-GCM",iv:t.encode(s.replace(".","").substring(0,16))},n,new Uint8Array(e.match(/../g).map((function(e){return parseInt(e,16)}))).buffer)})).then((function(e){return JSON.parse(n.decode(e))}))}function W(e){"login"===e.name?(X(),G(e.data)):"multipass"===e.name?(X(),O(e.data)):"activate"===e.name?(X(),B(e.data)):"error"===e.name&&function(e){var t=e.code,n=e.type,a=e.email,o=e.message;f&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"error",message:o}}));if(a&&541===t){var i=document.querySelectorAll('input[name="customer[email]"]');i.length&&i.forEach((function(e){return e.value=a}))}document.querySelectorAll('div[name="hiko-err"]').forEach((function(e){e.innerHTML="";var t=document.createElement("div");e.append(t),"error"===n?t.insertAdjacentHTML("beforeend",'<div style="display: flex; flex-wrap: wrap; color: red; text-align: left;">'.concat(o,"</div>")):t.insertAdjacentHTML("beforeend",'<div style="display: flex; flex-wrap: wrap; text-align: left;">'.concat(o,"</div>"))}))}(e.data)}function Y(e){if(null!=e&&e.avatar){var t=function(e){var t=e.first_name,n=e.last_name;if(!t&&!n)return"";if(t&&n)return"".concat(t," ").concat(n);if(t)return t;if(n)return n}(e),n=document.querySelectorAll('[name="hiko-avatar"]');if(n.length)n.forEach((function(n){if(e.avatar){if("IMG"===n.tagName)n.setAttribute("src",e.avatar),n.setAttribute("title",t);else if("A"===n.tagName){var a=n.querySelector("img");a?(a.setAttribute("src",e.avatar),a.setAttribute("title",t)):n.insertAdjacentHTML("beforeend",'<img src="'.concat(e.avatar,'" title="').concat(t,'"/>'))}n.style.dispay="block"}}));else if(/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/account($|\?)/.test(location.pathname)){var a;if(null===(a=p.avatar)||void 0===a||!a.profile)return;var o=document.querySelector("a[href*='/account/addresses']");if(o){var i,r,c='<img src="'.concat(e.avatar,'" title="').concat(t,'" alt="').concat(t,'" style="border-radius: 20%;width: 64px;height: 64px;margin-top: 10px"/>');null!==(i=p.avatar)&&void 0!==i&&i.profile_link&&(c='<a href="'.concat(null===(r=p.avatar)||void 0===r?void 0:r.profile_link,'">').concat(c,"</a>"));var l=$(c);o.parentNode.after(l),l.after($("<p><bold>".concat(t,"</bold></p>")))}}else{var s;if(null===(s=p.avatar)||void 0===s||!s.header)return;var d=document.querySelectorAll("a[href*='/account']");if(d.length){var u,f,h='<img src="'.concat(e.avatar,'" class="icon" title="').concat(t,'" alt="').concat(t,'" style="border-radius: 20%;width: 24px;height: 24px"/>');null!==(u=p.avatar)&&void 0!==u&&u.header_link&&(h='<a href="'.concat(null===(f=p.avatar)||void 0===f?void 0:f.header_link,'">').concat(h,"</a>"));var v=$(h);d.forEach((function(e){if(e.href&&e.href.match(/.*\/account$/)&&e.closest("header")){var t=e.cloneNode();t.append(v),e.after(t)}}))}}}}function $(e){var t=document.createElement("div");return t.innerHTML=e,1!==t.childElementCount&&n.error("childrens "+t.childElementCount+", "+e),t.firstChild}function Q(e){var t=e.indexOf("http")>=0?e:"https://apps.hiko.link".concat(e);return document.querySelectorAll('script[src^="'.concat(t,'"]')).length>0?Promise.resolve():new Promise((function(a){var o=document.createElement("script");o.src=t,o.defer="defer",o.async="async",o.onload=function(){n.debug("".concat(e," loaded")),a()},document.head.appendChild(o)}))}function X(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="IFRAME"===document.activeElement.tagName?document.body:document.activeElement;if(!1===e)return t.querySelector(".hikoloading").remove();t.insertAdjacentHTML("beforeend",'\n          <div class="hikoloading">\n            <div class="spinner">\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4335 4335" width="50" height="50">\n                <path\n                  fill="black"\n                  d="M3346 1077c41,0 75,34 75,75 0,41 -34,75 -75,75 -41,0 -75,-34 -75,-75 0,-41 34,-75 75,-75zm-1198 -824c193,0 349,156 349,349 0,193 -156,349 -349,349 -193,0 -349,-156 -349,-349 0,-193 156,-349 349,-349zm-1116 546c151,0 274,123 274,274 0,151 -123,274 -274,274 -151,0 -274,-123 -274,-274 0,-151 123,-274 274,-274zm-500 1189c134,0 243,109 243,243 0,134 -109,243 -243,243 -134,0 -243,-109 -243,-243 0,-134 109,-243 243,-243zm500 1223c121,0 218,98 218,218 0,121 -98,218 -218,218 -121,0 -218,-98 -218,-218 0,-121 98,-218 218,-218zm1116 434c110,0 200,89 200,200 0,110 -89,200 -200,200 -110,0 -200,-89 -200,-200 0,-110 89,-200 200,-200zm1145 -434c81,0 147,66 147,147 0,81 -66,147 -147,147 -81,0 -147,-66 -147,-147 0,-81 66,-147 147,-147zm459 -1098c65,0 119,53 119,119 0,65 -53,119 -119,119 -65,0 -119,-53 -119,-119 0,-65 53,-119 119,-119z"\n                ></path>\n              </svg>\n            </div>\n          </div>')}}();